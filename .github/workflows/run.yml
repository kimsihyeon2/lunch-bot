name: Lunch Notification

on:
  schedule:
    # -------------------------------------------------------
    # ⚠️ 중요: GitHub는 UTC 시간을 씁니다 (한국시간 - 9시간)
    # 한국 11:10 = UTC 02:10
    # 분(10) 시(2) 일 월 요일(1-5=월~금)
    # -------------------------------------------------------
    # 한국 10:50 (UTC 01:50)
    # 이렇게 하면 1시간이 밀려도 11:50분에는 옵니다.
    - cron: '50 1 * * 1-5'

  # 수동 실행 버튼 (테스트용)
  workflow_dispatch:

jobs:
  send-lunch-menu:
    runs-on: ubuntu-latest
    steps:
      - name: 코드 가져오기
        uses: actions/checkout@v3

      - name: 파이썬 설치
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      # 수정됨: requirements.txt 파일 없이 바로 설치 (에러 방지용)
      - name: 라이브러리 설치
        run: |
          pip install requests

      - name: 봇 실행
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
        run: python main.py
